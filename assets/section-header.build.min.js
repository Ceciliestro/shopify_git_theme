const o={announcementBar:".js-announcement-bar",header:".header-section",headerInner:".js-header",headerDrawerToggler:".js-header-drawer-toggler",headerDrawerCloseButton:".js-header-drawer-close-button",drawerMenu:"#headerDrawerMenu",mainMenuToggler:".js-main-menu-toggler",headerMenu:".js-mobile-header-menu",headerMainMenu:".js-mobile-header-main-menu",headerMenuToggler:".js-mobile-header-menu-toggler",headerDropdownToggler:".js-header-dropdown-menu-toggler",headerDropdownMenu:".js-header-dropdown-menu",headerMegaMenu:".js-header-mega-menu",headerMegaMenuToggler:".js-header-mega-menu-toggler",headerMegaMenuTogglerNested:".js-header-mega-menu-toggler-nested",headerMegaMenuNested:".js-header-mega-menu-nested",headerCartItemCount:".js-header-cart-item-count",headerCartItemCountWrapper:".js-header-cart-item-count-wrapper",predictiveSearchInput:".js-predictive-search-input",headerContent:"[data-open-menu-type]",headerDropdownMenuElement:".js-header-dropdown-menu-element",headerMegaMenuContent:".js-header-mega-menu-content",localizationForm:".js-localization-form",localizationInput:"input[name='language_code'], input[name='country_code']",localizationButton:".js-disclosure__button",localizationPanel:".js-disclosure-list",localizationLink:".js-disclosure__link"},m={drawerToggle:"data-js-toggle",itemCount:"data-cart-count",hideOnScrollDown:"data-hide-on-scroll-down",headerTransparent:"data-header-transparent",transparentHeaderOnHover:"data-transparent-header-on-hover",staticHeader:"data-static-header",ariaExpanded:"aria-expanded",hidden:"hidden",tabIndex:"tabindex"},p={headerHeight:"--header-height",headerHeightStatic:"--header-height-static",headerOffsetTop:"--header-offset-top",headerOffsetTopStatic:"--header-offset-top-static",pageHeight:"--page-height",announcementBarHeight:"--announcement-bar-height"},ze=()=>{const oe=window.themeCore.utils.Toggle,d=window.themeCore.utils.cssClasses,we=window.themeCore.utils.isElement,c=window.themeCore.utils.on,F=window.themeCore.utils.focusable,Me=window.themeCore.utils.removeTrapFocus,re=window.themeCore.utils.trapFocus,ve=window.themeCore.utils.bind,ae=window.themeCore.utils.debounce,E=ve(document.documentElement,{className:"esc-bind"});let W,I,n,y,j,S,w,R,ie,se,M,V,Q,Y,O,h,z,f,G,g,P,k,de,C,J,le,N,K,U,X,A;const Te="(min-width: 1200px)",ce=window.matchMedia(Te);function ye(){W=document.querySelector(":root"),n=document.querySelector(o.header),y=document.querySelector(o.headerInner),I=document.querySelector(o.announcementBar),n&&(U=document.documentElement.scrollTop||document.body.scrollTop,j=n.querySelector(o.headerCartItemCount),S=n.querySelector(o.headerContent),le=S.hasAttribute(m.hideOnScrollDown),N=S.hasAttribute(m.headerTransparent),K=S.hasAttribute(m.staticHeader),w=S.dataset.openMenuType,R=w==="click"?"click":"mouseenter",ie=n.querySelector(o.headerCartItemCountWrapper),se=[...n.querySelectorAll(o.headerDrawerToggler)],M=n.querySelector(o.drawerMenu),V=n.querySelector(o.mainMenuToggler),Q=n.querySelector(o.headerDrawerCloseButton),de=n.querySelector(o.headerMainMenu),Y=[...n.querySelectorAll(o.headerMenuToggler)],k=[],M&&(k=[...M.querySelectorAll(o.headerMenu)]),O=[...n.querySelectorAll(o.headerDropdownToggler)],h=[...n.querySelectorAll(o.headerDropdownMenu)],z=[...n.querySelectorAll(o.headerMegaMenuToggler)],f=[...n.querySelectorAll(o.headerMegaMenu)],G=[...n.querySelectorAll(o.headerMegaMenuTogglerNested)],g=[...n.querySelectorAll(o.headerMegaMenuNested)],P={},C=H(),J=C,A=!1,Ae(),Ce(),be(),_())}function Ce(){c("scroll",ae(()=>setTimeout(b,0),10,!1)),c("resize",()=>b()),N&&(c("scroll",ae(()=>setTimeout(_,0),0,!1)),c("resize",()=>_()),c("mouseover",n,()=>{!n.classList.contains(d.hover)&&!y.hasAttribute(m.transparentHeaderOnHover)&&n.classList.add(d.hover),b()}),c("focusin",n,()=>{n.classList.contains(d.hover)||n.classList.add(d.hover),b()}),c("mouseleave",n,()=>{n.classList.contains(d.hover)&&!s(f).length&&!s(h).length&&!s(g).length&&!x()&&n.classList.remove(d.hover),b()}),c("focusout",n,e=>{y.contains(e.relatedTarget)||(n.classList.contains(d.hover)&&!s(f).length&&!s(h).length&&!s(g).length&&!x()&&n.classList.remove(d.hover),b())})),Q&&c("click",Q,()=>window.themeCore.EventBus.emit("Toggle:headerToggleMenuDrawer:close")),M&&c("change",ce,e=>{e.matches?T(M)&&window.themeCore.EventBus.emit("Toggle:headerToggleMenuDrawer:close"):(s(h).length&&u(s(h)),s(f).length&&u(s(f)),s(g)&&u(s(g)))}),O&&(O.forEach(e=>{const t=document.getElementById(e.dataset.target);c(R,e,r=>{u(h.filter(a=>a!==t)),u(f.filter(a=>a!==t)),w==="hover"?q(t,!1):B(r,t,!1,e)}),w==="hover"&&c("click",e,r=>{e.matches(":not(:focus-visible)")||(u(h.filter(a=>a!==t)),B(r,t,!1,e))})}),c("click",document,e=>{if(!e.target.closest(o.headerDropdownMenu)&&s(h).length){if(w==="hover"&&e.target.matches(":not(:focus-visible)"))return;u(s(h)),window.themeCore.Accordion.collapseAllItems(o.headerDropdownMenu)}})),Y&&Y.forEach(e=>{const t=document.getElementById(e.dataset.target);c("click",e,r=>{if(A)return;let a=!1,i=document.getElementById(r.target.closest(o.headerMenuToggler).dataset.target);if(T(i)&&(a=!0),B(r,t,!0,700,!0,!1),a){let l;i.dataset.menuType==="deep-nested"?i.closest('[data-menu-type="deep-nested"]')&&(M.classList.remove(d.grandChildActive),l=i.closest('[data-menu-type="nested"]')):i.dataset.menuType==="nested"&&i.closest('[data-menu-type="nested"]')&&(M.classList.remove(d.childActive),l=i.closest('[data-menu-type="main"]')),l&&fe(l),E.isSet()||E.set()}else i.dataset.menuType==="deep-nested"?i.closest('[data-menu-type="deep-nested"]')&&M.classList.add(d.grandChildActive):i.dataset.menuType==="nested"&&i.closest('[data-menu-type="nested"]')&&(M.classList.add(d.childActive),de.scrollTop=0),De(i)})}),z&&z.forEach(e=>{const t=document.getElementById(e.dataset.target),r=e.closest(o.headerDropdownMenuElement),a=r.querySelector(o.headerMegaMenuNested),i=r.querySelector(o.headerMegaMenuTogglerNested),l=i&&i.closest(".header-mega-menu__menu-item-wrapper").matches(":first-child"),D=($,Oe)=>{if(A)return;u(f.filter(ne=>ne!==t)),u(h.filter(ne=>ne!==t)),s(g).length&&u(g,!0,0);let te=window.matchMedia("(hover: none)").matches;Oe?B($,t,te,500):w==="hover"?q(t,te):B($,t,te),setTimeout(()=>{l&&T(t)&&q(a,!1,!1)})};w==="hover"&&c(R,e,D),c("click",e,$=>{w==="hover"&&e.matches(":not(:focus-visible)")||D($,!0)})}),G&&G.forEach(e=>{const t=document.getElementById(e.dataset.target);c("click",e,r=>{let a=document.getElementById(r.target.closest(o.headerMegaMenuTogglerNested).dataset.target);if(!T(a)){u(g.filter(l=>l!==t),!1,0);let i=window.matchMedia("(hover: none)").matches;q(t,i,!1),setTimeout(()=>F(a)[0].focus(),0)}})}),w==="hover"&&(z.forEach(e=>{const t=e.closest(o.headerDropdownMenuElement),r=t.querySelector(o.headerMegaMenu),a=t.querySelector(o.headerMegaMenuContent),i=()=>e.matches(":not(:hover)")&&a.matches(":not(:hover)")&&T(r),l=()=>{let D=1e3;N&&(D=500),setTimeout(()=>{i()&&!u(f)&&s(g).length&&u(g)},D)};c("mouseleave",t,l),c("mouseleave",a,l)}),O.forEach(e=>{const t=()=>e.matches(":not(:hover)")&&r.matches(":not(:hover)")&&T(r),r=document.getElementById(e.dataset.target),a=()=>{let i=500;N&&(i=200),setTimeout(()=>{t()&&u(h)},i)};c("mouseleave",e,a),c("mouseleave",r,a)})),c("click",document,e=>{if(!e.target.closest(o.headerMegaMenu)&&s(f).length){if(w==="hover"&&e.target.matches(":not(:focus-visible)"))return;u(s(f)),s(g).length&&u(s(g))}if(!e.target.closest(o.headerDropdownMenu)&&s(h).length){if(w==="hover"&&e.target.matches(":not(:focus-visible)"))return;u(s(h)),window.themeCore.Accordion.collapseAllItems(o.headerDropdownMenu)}x()&&ee()}),(le||K)&&document.addEventListener("scroll",je)}function be(){window.themeCore.EventBus.listen(["EscEvent:on","Overlay:headerToggleMenuDrawer:close","Toggle:headerToggleMenuDrawer:close"],()=>{ge(V),s(k).length&&u(s(k)),s(h).length&&(u(s(h)),window.themeCore.Accordion.collapseAllItems(o.headerDropdownMenu)),s(f).length&&u(s(f)),s(g).length&&u(s(g)),M.classList.remove(d.childActive),M.classList.remove(d.grandChildActive)}),window.themeCore.EventBus.listen("Toggle:headerToggleMenuDrawer:open",()=>{Z(V)}),window.themeCore.EventBus.listen("cart:updated",e=>{Ee(e)}),window.themeCore.EventBus.listen("Header:loaded",()=>{h.forEach(e=>{me(e)})}),window.themeCore.EventBus.listen(["announcement-bar:loaded","announcement-bar:changed"],()=>{b(),_()}),window.themeCore.EventBus.listen("Toggle:headerBoxShadow",e=>{Be(e)})}function b(){if(X){v(p.headerHeight,"0px"),C=0,v(p.headerOffsetTop,"0px"),v(p.pageHeight,` ${window.innerHeight}px`);return}H()!==C&&(v(p.headerHeight,` ${H()}px`),v(p.headerHeightStatic,` ${H()}px`),C=H(),J=C),L()>0?(v(p.headerOffsetTop,` ${Math.max(L(),0)}px`),L()>parseInt(ue(p.headerOffsetTopStatic))&&v(p.headerOffsetTopStatic,` ${Math.max(L(),0)}px`)):ue(p.headerOffsetTop)!==" 0px"&&v(p.headerOffsetTop,` ${Math.max(L(),0)}px`),v(p.pageHeight,` ${window.innerHeight}px`),v(p.announcementBarHeight,` ${Se()}px`)}function Ee(e){e.hasOwnProperty("item_count")&&(ie.setAttribute(m.itemCount,e.item_count),j.innerHTML=e.item_count,e.item_count>99?j.innerHTML="99+":j.innerHTML=e.item_count)}function v(e,t){requestAnimationFrame(()=>{W.style.setProperty(e,t)})}function ue(e){return W.style.getPropertyValue(e)}function H(){return n.getBoundingClientRect().height}function Se(){return window.Shopify.designMode&&(I=document.querySelector(o.announcementBar)),I?I.getBoundingClientRect().height:0}function L(){return y.hasAttribute("data-static-header")?0:n.getBoundingClientRect().top}function Ae(){se.forEach(e=>{let t=e.getAttribute(m.drawerToggle);if(t==="searchToggleDrawer"){const r=document.querySelector(o.predictiveSearchInput);oe({toggleSelector:t,toggleTabIndex:!0,elementToFocus:r}).init();return}oe({toggleSelector:t,toggleTabIndex:!0,overlayPlacement:n}).init()})}function T(e){return e.classList.contains(d.active)}function B(e,t,r,a,i,l){e.preventDefault(),a===void 0&&(a=200),A=!0,i===void 0&&(i=!0),l===void 0&&(l=!0),He(t,r,a,i,l),setTimeout(()=>A=!1,a)}function He(e,t,r,a,i){return T(e)?he(e,!t,r,i):q(e,t,a)}function q(e,t,r){const a=window.innerWidth-document.body.clientWidth;Le(e),[...document.querySelectorAll(`[data-target="${e.id}"]`)].forEach(l=>{qe(l),Z(l),n.classList.contains(d.hover)||n.classList.add(d.hover)}),setTimeout(()=>Z(e),0),t&&(document.body.style.overflow="hidden",y.style.paddingRight=a+"px"),r&&fe(e),E.isSet()||E.set()}function he(e,t,r,a){if(!e||!T(e))return;e.classList.remove(d.active),[...document.querySelectorAll(`[data-target="${e.id}"]`)].forEach(l=>{xe(l),ge(l),n.classList.contains(d.hover)&&y.hasAttribute(m.transparentHeaderOnHover)&&n.classList.remove(d.hover)}),setTimeout(()=>me(e),r),t&&(document.body.style.overflow=null,y.style.paddingRight="0px"),a&&Ie(),E.remove()}function Z(e){e.classList.add(d.active)}function ge(e){e.classList.remove(d.active)}function me(e){e.classList.add(d.hidden)}function Le(e){e.classList.remove(d.hidden)}function Be(e){n.classList.toggle(d.shadowHidden,e)}function qe(e){e.setAttribute(m.ariaExpanded,!0)}function xe(e){e.setAttribute(m.ariaExpanded,!1)}function De(e){F(e).forEach(t=>{t.setAttribute(m.tabIndex,0)})}function fe(e){if(!e)return;P=document.activeElement;const t=F(e);if(t.length){window.setTimeout(()=>re(e,{elementToFocus:t[0]}),0);return}re(e)}function Ie(){we(P)&&window.setTimeout(()=>P.focus(),0),Me()}function u(e,t,r){x()&&ee(),r===void 0&&(r=200),t===void 0&&(t=!0),e.forEach(a=>{he(a,!0,r,t)})}function s(e){return e.filter(t=>T(t))}function _(){let e=window.scrollY<=0;e&&!n.classList.contains("header-section--top-position")?n.classList.add("header-section--top-position"):!e&&n.classList.contains("header-section--top-position")&&n.classList.remove("header-section--top-position")}function je(){let e=document.documentElement.scrollTop||document.body.scrollTop;(K?e>0:e>0&&U<=e)?getComputedStyle(document.body).overflow!=="hidden"&&(!n.matches(":hover")||!ce.matches)&&n.getBoundingClientRect().y+n.getBoundingClientRect().height<e&&(n.classList.add(d.collapsed),X=!0,window.themeCore.EventBus.emit("Toggle:headerToggleMenuDrawer:close")):(n.classList.remove(d.collapsed),X=!1),U=e,x()&&ee()}function ee(){[...document.querySelectorAll(o.localizationForm)].forEach(t=>{const r=t.querySelectorAll(o.localizationLink),a=t.querySelector(o.localizationButton);t.querySelector(o.localizationPanel).setAttribute(m.hidden,"true"),a.setAttribute(m.ariaExpanded,"false"),r.forEach(l=>l.setAttribute("tabindex",-1))})}function x(){const e=[...document.querySelectorAll(o.localizationForm)];let t=!1;return e.forEach(r=>{r.querySelector(o.localizationPanel).hasAttribute(m.hidden)||(t=!0)}),t}return Object.freeze({init:ye,getHeaderHeight:()=>C,getHeaderHeightStatic:()=>J})},pe=()=>{window.themeCore.Header=window.themeCore.Header||ze(),window.themeCore.utils.register(window.themeCore.Header,"header")};window.themeCore&&window.themeCore.loaded?pe():document.addEventListener("theme:all:loaded",pe,{once:!0});
