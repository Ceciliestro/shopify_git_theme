const n={ageCheckPopup:"age-check-popup",ageCheckPopupToggle:"AgeCheckPopupToggle",confirmButton:".js-age-check-popup-confirm"},m=()=>{const p=window.themeCore.utils.Toggle,r=window.themeCore.utils.on,l=window.themeCore.utils.setCookie,s=window.themeCore.utils.getCookie;let o,c,t,i;function g(){if(o=document.getElementById(n.ageCheckPopup),!o){if(Shopify.designMode){const e=document.querySelector("[data-js-overlay='AgeCheckPopupToggle']");document.body.classList.remove("blur-content"),e&&e.click()}return}c=o.getAttribute("data-redirect-url"),d(),a()}function d(){s("age_check_popup")||(t=p({toggleSelector:n.ageCheckPopupToggle}),window.themeCore.ageCheckPopupOpen=!0,t.init(),document.body.classList.add("blur-content"),t.open(o),r("click",o,function(e){e.target==this&&t.close(o)}),window.themeCore.EventBus.listen(`Toggle:${n.ageCheckPopupToggle}:close`,()=>{i||(window.location.href=c)}),r("keyup",e=>{e.keyCode===27&&(i||(window.location.href=c))}))}function a(){const e=document.querySelector(n.confirmButton);e&&e.addEventListener("click",function(){h(),document.body.classList.remove("blur-content"),i=!0,t.close(o),window.themeCore.ageCheckPopupOpen=!1,window.themeCore.EventBus.emit("create:newsletter:popup")})}function h(){if(!o.hasAttribute("data-cookie-time"))return;let k=o.dataset.cookieTime*24*60*60;l("age_check_popup","1",{"max-age":k})}return Object.freeze({init:g})},u=()=>{window.themeCore.AgeCheckPopup=window.themeCore.AgeCheckPopup||m(),window.themeCore.utils.register(window.themeCore.AgeCheckPopup,"age-check-popup")};window.themeCore&&window.themeCore.loaded?u():document.addEventListener("theme:all:loaded",u,{once:!0});
