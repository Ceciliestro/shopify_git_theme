const r={addressContainer:".js-addresses-container",newAddressForm:".js-addresses-new-form",editAddressesForm:".js-addresses-edit-form",addressCountryOptions:".js-address-country-option",addressDelete:".js-address-delete",addressesNewToggle:".js-address-new-toggle",editAddressForm:"#EditAddress_",addressesEditToggle:".js-address-edit-toggle",addressesResetToggle:".js-address-reset-toggle",addressesCard:".js-addresses-card",newMainButton:"[data-new-main-btn]"},l=[];let i;const y=()=>{function u(){i=window.themeCore.utils.cssClasses;const d=document.querySelector(r.addressContainer);g(),f(),h(d),A(d),C(d)}function g(){window.Shopify&&new window.Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"}),[...document.querySelectorAll(r.addressCountryOptions)].forEach(s=>{let t=s.dataset.formId,e="AddressCountry_"+t,o="AddressProvince_"+t,n="AddressProvinceContainer_"+t;new window.Shopify.CountryProvinceSelector(e,o,{hideElement:n})})}function f(){document.querySelectorAll(r.editAddressesForm).forEach(s=>{let t=[];[...s.elements].forEach(e=>{e.name&&(e.type==="checkbox"?t[e.name]=e.checked:t[e.name]=e.value)}),l.push({id:s.id,data:t})})}function w(d){var o;const s=d.target.closest(r.editAddressesForm);if(!s)return;const t=(o=l.find(n=>s.id===n.id))==null?void 0:o.data;if(!t)return;const e=s.querySelector(r.addressCountryOptions);e.value=t[e.name],e.dispatchEvent(new Event("change")),Object.keys(t).forEach(n=>{const a=s.elements[n];a&&a.name&&(a.type==="checkbox"?a.checked=t[n]:a.value=t[n])})}function h(d){d.addEventListener("click",s=>{if(!s.target.closest(r.addressesNewToggle))return;let e=d.querySelector(r.newAddressForm);if(!e)return;e.classList.toggle(i.hidden);const o=d.querySelector(r.newMainButton);if(!o)return null;o.classList.toggle(i.hidden)})}function A(d){d.addEventListener("click",s=>{if(!s.target.closest(r.addressesEditToggle))return;let e=r.editAddressForm+s.target.dataset.formId;if(!e)return;d.querySelector(e).classList.toggle(i.hidden),d.querySelectorAll(r.addressesCard).forEach(c=>{c.dataset.cardId===s.target.dataset.formId&&c.classList.toggle(i.hidden)}),s.target.closest(r.addressesResetToggle)&&w(s)})}function C(d){d.addEventListener("click",s=>{const t=s.target.closest(r.addressDelete);if(!t)return;const e=t.dataset.formId,o=t.dataset.confirmMessage;confirm(o||"Are you sure you wish to delete this address?")&&window.Shopify.postLink("/account/addresses/"+e,{parameters:{_method:"delete"}})})}return Object.freeze({init:u})},m=()=>{window.themeCore.CustomersAddressesTemplate=window.themeCore.CustomersAddressesTemplate||y(),window.themeCore.utils.register(window.themeCore.CustomersAddressesTemplate,"addresses-template")};window.themeCore&&window.themeCore.loaded?m():document.addEventListener("theme:all:loaded",m,{once:!0});
